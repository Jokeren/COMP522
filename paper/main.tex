\documentclass[11pt]{article}

\pdfoptionpdfminorversion=5

% American letter size:
\textwidth6.5in \textheight9in \oddsidemargin 0pt \evensidemargin 0pt
\topmargin -47pt


\usepackage{times}
\usepackage{fullpage}
\usepackage{epic}
\usepackage{subfigure}
\usepackage{wrapfig}
\usepackage{eepic}
\usepackage{epsfig}
\usepackage{color}
\usepackage{amsmath,amsthm,amssymb}
\usepackage{amsfonts}
\usepackage{float}
\usepackage{appendix}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{url}

\renewcommand\floatpagefraction{1.0}
\renewcommand\topfraction{1.0}
\renewcommand\bottomfraction{0.9}
\renewcommand\bottomfraction{1.0}
\renewcommand\textfraction{0.0}

\newenvironment{enum*}%
 {\begin{enumerate}%
   \setlength{\itemsep}{-5pt}%
   \setlength{\parsep}{-5pt}%
   \setlength{\topsep}{-5pt}}%
 {\end{enumerate}}

\newenvironment{item*}%
 {\begin{itemize}%
   \setlength{\itemsep}{-5pt}%
   \setlength{\parsep}{-5pt}%
   \setlength{\topsep}{-5pt}}%
 {\end{itemize}}

\newcommand{\tup}[1]{%
        \relax\ifmmode
	           \langle #1 \rangle%
        \else
                $\langle$#1$\rangle$%
        \fi
}

\theoremstyle{plain}
\floatstyle{ruled}
\newfloat{algo}{htbp}{algo}
\floatname{algo}{Algorithm}
\usepackage[noend]{algorithmic}
\usepackage{distribalgo}

\usepackage{setspace}
%\doublespacing

\newtheorem{thm}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{claim}{Claim}
\newtheorem{corollary}{Corollary}
\newtheorem{definition}{Definition}
\newtheorem{property}{Property}
\newtheorem{proposition}{Proposition}
\newtheorem{observation}{Observation}
\newtheorem{conjecture}{Conjecture}
\newtheorem{designrule}{Design Principle}
\newtheorem{invariant}{Invariant}
\newtheorem{theorem}{Theorem}

\newcommand{\up}[1]{\ensuremath{^{\textrm{#1}}}}
\newcommand{\down}[1]{\ensuremath{_{\textrm{#1}}}}
\newcommand{\tb}{\makebox[0.6cm]{}}
\newcommand{\negspace}{\vspace{-0.6\baselineskip}}
\newcommand{\snegspace}{\vspace{-0.25\baselineskip}}
\def\hyph{-\penalty0\hskip0pt\relax}

\newenvironment{restate}[1]{\begin{trivlist} \item {\bf #1 (restated)} \em}
  {\end{trivlist}}

\definecolor{Gray}{rgb}{0.1,0.4,0.1}
\definecolor{DarkBlue}{rgb}{0.2,0.2,0.5}
\definecolor{Cyan}{rgb}{0.5,0.2,0.5}
\newcommand{\comment}[1]{{\color{Gray}{$\rhd$ #1}}}
\newcommand{\elcomment}[1]{\hfill{\comment{#1}}}
\newcommand{\funcname}[1]{\textsc{\color{DarkBlue}{#1}}}
\newcommand{\typename}[1]{\textbf{\color{Cyan}{#1}}}

%\setlength\topmargin{-0.025in}
%\setlength\textheight{8.75in}

%%=======================================================================
%% Latex template for SPAA 2012
%%=======================================================================
%
%% remember to compile with dvips -t letter for US letter style
%
%\documentclass[11pt]{article}
%
%% American letter size:
%\textwidth6.5in \textheight9in \oddsidemargin 0pt \evensidemargin 0pt
%\topmargin -47pt
%
%\usepackage{times}
%
%\newtheorem{theorem}{Theorem}[section]
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{claim}[theorem]{Claim}
%\newtheorem{fact}[theorem]{Fact}
%
%\newcommand{\sq}{\hbox{\rlap{$\sqcap$}$\sqcup$}}
%\newcommand{\qed}{\hspace*{\fill}\sq}
%\newenvironment{proof}{\noindent {\bf Proof.}\ }{\qed\par\vskip 4mm\par}
%\newenvironment{proofof}[1]{\bigskip \noindent {\bf Proof of #1:}\quad }
%{\qed\par\vskip 4mm\par}



\begin{document}

\begin{titlepage}

\title{SALSA: Scalable and Low Synchronization NUMA-aware Algorithm for Producer-Consumer Pools \\
       {\Large (Regular Submission)}}

\author{Elad Gidron \\
   Department of Computer Science,\\Technion, Haifa, Israel\\
   eladgi@cs.technion.ac.il \\
   \and
   Idit Keidar \\
   Department of Electrical Engineering,\\Technion, Haifa, Israel\\
   idish@ee.technion.ac.il \\
   \and
   Dmitri Perelman \\
   Department of Electrical Engineering,\\Technion, Haifa, Israel\\
   dima39@tx.technion.ac.il \\
   \and
   Yonathan Perez \\
   Department of Electrical Engineering,\\Technion, Haifa, Israel\\
   yonathan0210@gmail.com
   } 

\date{}

\maketitle \thispagestyle{empty}

\begin{abstract}
We present a highly-scalable non-blocking producer-consumer task pool, designed with a special emphasis on lightweight synchronization and data locality.
The core building block of our pool is \emph{SALSA, Scalable And Low Synchronization Algorithm} for a single-consumer container with task stealing support. Each consumer operates on its own SALSA container, stealing tasks from other containers if necessary. We implement an elegant self-tuning policy for task insertion, which does not push tasks to overloaded SALSA containers, thus decreasing the likelihood of stealing. 

SALSA manages large chunks of tasks, which improves locality and facilitates stealing. The use of page-size chunks is perfectly suitable for data migration among processor nodes in NUMA architectures. 
SALSA uses a novel approach for coordination among consumers, without strong atomic operations or memory barriers in the fast path. It invokes only two CAS operations during a chunk steal. 

Our evaluation demonstrates that a pool built using SALSA containers scales \emph{linearly} with the number of threads and significantly outperforms other FIFO and non-FIFO alternatives.

\end{abstract}

\bigskip

\centerline{{\bf Keywords}: multi-core, concurrent data structures, producer-consumer pools, non-blocking synchronization.}

\end{titlepage}

\section{Introduction}
\label{sec:intro}
\input{intro}

\section{Related Work}
\label{sec:related}
\input{related}

\section{System Overview}
\label{sec:system}
\input{system}

\section{Algorithm Description}
\label{sec:algo}
\input{algorithmDescription}

\section{Correctness}
\label{sec:correctness}
\input{safety}

\section{Evaluation}
\label{sec:evaluation}
\input{evaluation}

\section{Conclusions}
\label{sec:conclusions}
We present a highly-scalable task pool framework built upon SALSA.
We employ a number of novel techniques for improving the system performance: 1) our consumers' coordination allows lightweight and synchronization-free produce and consume operations in the common case; 2) a NUMA-aware memory management keeps most of the data accesses inside NUMA nodes
3) a chunk-based stealing approach that decreases the stealing cost and perfectly suits the NUMA migration schemes; 4) an elegant producer-based balancing for decreasing the likelihood of stealing.

Our evaluation demonstrates that a pool built using SALSA containers scales \emph{linearly} with the number of threads outperforming other work-stealing techniques by a factor of $20$. 

We believe that our approach of partitioning data structures into per-consumer pools with efficient synchronization-free fast-path is extremely appealing for building scalable high-performance algorithms and it can be applicable in other domains as well. 

\bibliographystyle{abbrv}
\bibliography{refs}

\pagebreak \small

\begin{appendix}

\section{Lock-freedom proof}
\label{appendix:lock-freedom}
\input{appendix-claim1-proof}
\clearpage
\section{Chunk size influence}
\label{appendix:chunk-size}
\input{appendix-chunk-size}

\end{appendix}

\end{document}